version: '3.7'

services:
  frontend-dev:
    container_name: musicthing-frontend-dev
    build:
      context: ./webclient/.
      dockerfile: dev.dockerfile
    volumes:
      - '.:/app'
      - '/app/node_modules'
    ports:
      - '3001:3000'
    environment:
      - NODE_ENV=development
      - CHOKIDAR_USEPOLLING=true

  backend-prod:
    container_name: musicthing-backend-prod
    build:
      context: ./backend/.
      dockerfile: prod.dockerfile
    volumes:
      - './testmusic:/var/lib/musicthingdata/music'
    # - './backend/:/app'
    # - '/app/node_modules'
    ports:
      - '3005:3005'
